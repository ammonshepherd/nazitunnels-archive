{"id":1814,"date":"2015-01-30T13:27:20","date_gmt":"2015-01-30T18:27:20","guid":{"rendered":"http:\/\/nazitunnels.org\/?p=1814"},"modified":"2015-01-30T13:27:20","modified_gmt":"2015-01-30T18:27:20","slug":"converting-pdfs-to-pngs-and-my-workflow","status":"publish","type":"post","link":"http:\/\/nazitunnels.org\/2015\/01\/30\/converting-pdfs-to-pngs-and-my-workflow\/","title":{"rendered":"Converting PDFs to PNGs &#038; My Workflow"},"content":{"rendered":"<p>I&#8217;ve posted about combining a <a title=\"Convert a folder of Images to PDF\" href=\"http:\/\/nazitunnels.org\/2014\/10\/convert-a-folder-of-images-to-pdf.html\">bunch of images into one PDF<\/a>, but how about going the other way?<\/p>\n<p><a href=\"https:\/\/mazira.com\/blog\/optimal-image-conversion-settings-tesseract-ocr\">This site<\/a> has a great tutorial for using GhostScript to convert a PDF into PNGs suitable for using for OCR. They do a great job explaining the different flags for GhostScript and some tips for getting the best resolution for the PNGs. The one step they don&#8217;t show is how to get each page of a PDF into a separate PNG (so a 10 page PDF makes 10 PNGs).<\/p>\n<p>Here&#8217;s how to do that:<\/p>\n<p>In the output image name, add:\u00a0<span class=\"lang:sh decode:true  crayon-inline \">%03d<\/span><\/p>\n<p>This will insert an automatically incremented number padded with a padding of three digits. That means the first number will be 001, then 002, then 003, and so forth. This is really helpful in keeping the files in alphabetical and numerical order. Otherwise you&#8217;ll get a file ending in 11 coming before 2.<\/p>\n<p>Here is the complete command I have been using:<\/p>\n<pre class=\"lang:sh decode:true\">gs -dSAFER -sDEVICE=png16m -dINTERPOLATE -dNumRenderingThreads=8 -r300 -o Zsuzsa_Polgar-%03d.png -c 30000000 setvmthreshold -f Polgar_Zsuzsa-1574-10.03.1992.pdf<\/pre>\n<p>So my workflow has been like this:<\/p>\n<p>1. If I have a scanned copy of files in PDF form I run the above GhostScript command. This results in a folder of PNG images.<\/p>\n<p>2. I run a new watermark\/OCR tool on the folder of images. It is a Ruby script which utilizes ImageMagick for creating a watermark and Tesseract for running OCR on the images. You can find this program here:<\/p>\n<p class=\"p1\"><a href=\"https:\/\/github.com\/mossiso\/cowl.git\"><span class=\"s1\">https:\/\/github.com\/mossiso\/cowl<\/span><\/a><\/p>\n<p class=\"p1\">This creates a folder called &#8216;output&#8217; with a PDF of all the images (kind of redundant when starting with a PDF, but now the pages have the watermark on them), and two sub-folders, one with the OCR files, and one with the watermarked copies.<\/p>\n<p class=\"p1\">3. Now I can get rid of the PNGs that were created with the GhostScript command.<\/p>\n<p class=\"p1\">\n<p class=\"p1\">Now that I have each page OCRed, I can\u00a0do searches on these files, where otherwise I had to read through the entire PDF page by page. For example, today I&#8217;m looking through a 40+ page PDF transcript of a survivor interview to find the parts where she talks about her experiences at the Porta Westfalica camp. While I&#8217;ll read through each page, to get a sense of where I should be looking I can now do a search on the OCRed pages to find out where the term &#8216;Porta&#8217; is found.<\/p>\n<p class=\"p1\"><a href=\"http:\/\/nazitunnels.org\/wp-content\/uploads\/2015\/01\/Screen-Shot-2015-01-30-at-1.17.16-PM.png\" data-rel=\"lightbox-image-0\" data-rl_title=\"\" data-rl_caption=\"\" title=\"\"><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-large wp-image-1815\" src=\"http:\/\/nazitunnels.org\/wp-content\/uploads\/2015\/01\/Screen-Shot-2015-01-30-at-1.17.16-PM-1024x180.png\" alt=\"Screen Shot 2015-01-30 at 1.17.16 PM\" width=\"620\" height=\"109\" srcset=\"http:\/\/nazitunnels.org\/wp-content\/uploads\/2015\/01\/Screen-Shot-2015-01-30-at-1.17.16-PM-1024x180.png 1024w, http:\/\/nazitunnels.org\/wp-content\/uploads\/2015\/01\/Screen-Shot-2015-01-30-at-1.17.16-PM-300x53.png 300w, http:\/\/nazitunnels.org\/wp-content\/uploads\/2015\/01\/Screen-Shot-2015-01-30-at-1.17.16-PM.png 1474w\" sizes=\"(max-width: 620px) 100vw, 620px\" \/><\/a><\/p>\n<p class=\"p1\">Now I know that at least on pages 47 and 48 is where I&#8217;ll find some description of her time in Porta Westfalica.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;ve posted about combining a bunch of images into one PDF, but how about going the other way? This site has a great tutorial for using GhostScript to convert a PDF into PNGs suitable for using for OCR. They do a great job explaining the different flags for GhostScript and some tips for getting the &hellip;<\/p>\n","protected":false},"author":1,"featured_media":1818,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[32,86],"tags":[36,63,93],"class_list":["post-1814","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","category-methodology","category-technology","tag-images","tag-ocr","tag-script"],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"http:\/\/nazitunnels.org\/wp-content\/uploads\/2015\/01\/Hausberge.jpeg","_links":{"self":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts\/1814"}],"collection":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/comments?post=1814"}],"version-history":[{"count":2,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts\/1814\/revisions"}],"predecessor-version":[{"id":1817,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts\/1814\/revisions\/1817"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/media\/1818"}],"wp:attachment":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/media?parent=1814"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/categories?post=1814"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/tags?post=1814"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}