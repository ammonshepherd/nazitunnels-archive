{"id":2004,"date":"2016-02-25T14:37:43","date_gmt":"2016-02-25T19:37:43","guid":{"rendered":"http:\/\/nazitunnels.org\/?p=2004"},"modified":"2016-08-10T14:59:43","modified_gmt":"2016-08-10T18:59:43","slug":"the-writing-stack","status":"publish","type":"post","link":"http:\/\/nazitunnels.org\/2016\/02\/25\/the-writing-stack\/","title":{"rendered":"The Writing Stack: Zotero -> Scrivener -> ODT -> Docx -> Markdown -> HTML"},"content":{"rendered":"<h1>Scrivener to Markdown and HTML<\/h1>\n<p>How to write in Scrivener and display in HTML, Markdown, ODT, or Doc and keep the footnotes and images.<\/p>\n<p>This is the process I use for getting my chapters out of Scrivener and formatted into Markdown and HTML for putting on the web. Markdown for Github, and HTML for a static website, and Doc for turning in to advisors and the Library.<\/p>\n<h2>Write it<\/h2>\n<p>Use Scrivener to bring all of the notes and sources together in one place.<\/p>\n<h3>Note it<\/h3>\n<p>The process of writing actually begins while reading through books and looking at original source documents. For each source (whether book, document, image, or web page) I create an entry in Zotero. With an entry in Zotero, I create a child-note for that entry and take notes in that child-note. I always include the page number in the notes for easy referencing later. A typical note for an entry in Zotero looks like this:<\/p>\n<pre><code>Kaj Bj\u00f6rn Karbo (July 4, 1920)\n\n{ | Karbo, 1947 | | |zu:312:A6J3JADD} \n\npage 1,\n1400 men were supposed to wash in half and hour at 20 faucets.\nLongest roll call was 4 hours because a couple of men had escaped.\n\npage 2,\nRelationship to Kapos was bad, also to Russians, and somewhat so to other nationalities.\nKapos were German, Russian, Polish and Czech\n\npage 3,\nPunishments consisted of beatings with boards from a bed and truncheon. \nStretched over a bench and held by four men and then beat\n\npage 4,\nWas part of many different work commands. In January 1945 was Schieber, \nthe lowest rung of prison hierarchy. He was in charge of a 16 man work \ngang. they helped German civilian workers build a factory for synthetic fuel.\n<\/code><\/pre>\n<p>The part in curly braces <code>{ | Karbo, 1947 | | |zu:312:A6J3JADD}<\/code> comes in handy later when adding citations in Scrivener.<\/p>\n<h3>Compose it<\/h3>\n<p>With all of the notes taken (for now, it can be a never ending process), copy and paste the relevant notes in the correct section of the Scrivener outline. Basically, each idea gets its own &#8216;page&#8217;. This boils down to each paragraph, more or less, on its own &#8216;page&#8217;.<\/p>\n<h2>Export it<\/h2>\n<p>First step is to export the chapter from Scrivener.<\/p>\n<ul>\n<li>Export it as the OpenOffice (.odt) format. Give it a name like <code>chapter2.odt<\/code>.<\/li>\n<\/ul>\n<h2>Scan it<\/h2>\n<p>To get the footnotes into the correct format (MLA, Chicago, etc), we&#8217;ll scan the .odt file with Zotero. This creates a new file.<\/p>\n<ul>\n<li>Open Zotero, click the gear, and select &#8216;RTF\/ODF Scan&#8217;.<\/li>\n<li>Select the file you created above (<code>chapter2.odt<\/code>).<\/li>\n<li>Create a new name and place to save it (<code>chapter2-citations.odt<\/code>)<\/li>\n<\/ul>\n<h2>Cite it<\/h2>\n<p>The Zotero scan converts all of the coded citations from Scrivener into &#8216;normal&#8217; citations.<\/p>\n<p>from this: <code>{ | Blanke-Bohne, 1984 | p. 16 | |zu:312:KMQEIBU0N}<\/code><\/p>\n<p>to this: <code>Blanke-Bohne, 1984.<\/code><\/p>\n<p>To get it into a different citation style, we&#8217;ll open up the file in LibreOffice and change the citation style using the Zotero &#8216;Set Document Preferences&#8217; menu.<\/p>\n<p>from this: <code>Blanke-Bohne, 1984.<\/code><\/p>\n<p>to this: <code>Blanke-Bohne, Reinhold. \"Die unterirdische Verlagerung von R\u00fcstungsbetrieben und die A\u00dfuenlager des KZ Neuengamme in Porta Westfalica bei Minden.\" Dissertation, University of Bremen, 1984.<\/code><\/p>\n<p>After the changes finish (could take a while), then save the document as a Word, make sure to do a &#8216;Save As&#8217; .docx file (<code>chapter2-citations.docx<\/code>).<\/p>\n<h2>Fix it<\/h2>\n<p>Only the .docx format is supported by pandoc for extracting images, so we&#8217;ll need to use Word as the final format before converting to Markdown and HTML. Frankly, it also has much better grammar and spell checking.<\/p>\n<p>Open the .docx in Microsoft Word and fix up any formatting issues.<\/p>\n<p>I also turn this version in to my advisors for review.<\/p>\n<h2>Convert it<\/h2>\n<p>In the terminal, we&#8217;ll use the <a href=\"http:\/\/pandoc.org\/\">pandoc<\/a> command to convert the file to Markdown and HTML.<\/p>\n<p>This will convert the .docx file to a markdown file, extracting the images and putting them in a &#8216;files\/media\/&#8217; directory.<\/p>\n<p>The images are named incrementally in the order they are encountered in the document. The images are given a default name, keeping the extension. If I had four images in the file (two jpegs, one png, and one gif), they would be extracted and named like so:  image1.jpeg, image2.jpeg, image3.png, image4.gif, etc.<\/p>\n<p>We&#8217;ll have to go in and fix the tables and check for other formatting issues.<\/p>\n<pre><code>pandoc --smart --extract-media=files -f docx -t markdown_github chapter1-citations.docx -o chapter1.md\n<\/code><\/pre>\n<p>Next we can create an HTML file using pandoc and the .docx file.<\/p>\n<pre><code>pandoc --smart --extract-media=files --ascii --html-q-tags --section-divs -f docx -t html5 chapter1-citations.docx -o chapter1.html\n<\/code><\/pre>\n<p>This creates an HTML file with the images linked to the files in the files\/media\/ directory and the footnotes converted to hyperlinks.<\/p>\n<h2>Version it<\/h2>\n<p>Now these files can more easily be tracked with a versioning system, like git, and the HTML files can be uploaded for a static website version of the<br \/>\ndissertation. Styling can easily be applied if used in a <a href=\"http:\/\/jekyllrb.com\/\">Jekyll<\/a> site.<\/p>\n<p>For sharing on Github, there are two repos, main and gh-pages.<\/p>\n<h3><code>main<\/code> repo<\/h3>\n<p>The main repo is simply the chapter directories with each of the document versions and the extracted media files. Once edits and conversions are done, this is updated with a simple<\/p>\n<pre><code>git add .\ngit commit -m \"Updates chapter X\"\ngit push\n<\/code><\/pre>\n<h3><code>gh-pages<\/code> repo<\/h3>\n<p>The gh-pages repo contains the files needed to convert the html version of the doucments into a Jekyll based static website. The trick here is to get all of the updates from the main repo into this gh-pages repo. This is accomplished with doing the following command while checked out in the gh-pages branch.<\/p>\n<pre><code>```\ngit checkout master -- chapterX\n```\n<\/code><\/pre>\n<p>Before I can push the new changes to Github, I&#8217;ll need to fix a few things in the html version of the chapter.<\/p>\n<p>First is to add some YAML front matter. I add this to the beginning of the HTML version.<\/p>\n<pre><code>---\nlayout: page\ntitle: Chapter X\n---\n<\/code><\/pre>\n<p>Second, update the path for the images so that they will work. I open the file in Vim and do a simple search and replace:<\/p>\n<pre><code>:%s\/img src=\"files\/img src=\"..\\\/files\/g\n<\/code><\/pre>\n<p>Now I can update the gh-pages branch and the site.<\/p>\n<pre><code>git add .\ngit commit -m \"Add updates from chapterX\"\ngit push\n<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>Scrivener to Markdown and HTML How to write in Scrivener and display in HTML, Markdown, ODT, or Doc and keep the footnotes and images. This is the process I use for getting my chapters out of Scrivener and formatted into Markdown and HTML for putting on the web. Markdown for Github, and HTML for a &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[40,41,32,1,86],"tags":[104,21,20],"class_list":["post-2004","post","type-post","status-publish","format-standard","hentry","category-academic","category-dissertation","category-methodology","category-news","category-technology","tag-formatting","tag-scrivener","tag-writing"],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","_links":{"self":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts\/2004"}],"collection":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/comments?post=2004"}],"version-history":[{"count":11,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts\/2004\/revisions"}],"predecessor-version":[{"id":2027,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/posts\/2004\/revisions\/2027"}],"wp:attachment":[{"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/media?parent=2004"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/categories?post=2004"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/nazitunnels.org\/wp-json\/wp\/v2\/tags?post=2004"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}